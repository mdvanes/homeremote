{"version":3,"sources":["public/_js/core.js"],"names":[],"mappings":";;;;;;AAAA,CAAC,UAAS,CAAC,EAAE;AACT,gBAAY,CAAC;;;;QAIP,eAAe;AACN,iBADT,eAAe,CACL,KAAK,EAAE;;;kCADjB,eAAe;;AAEb,gBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,gBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,gBAAI,CAAC,UAAU,GAAG,+BAA+B,CAAC;;;AAGlD,aAAC,CAAC,GAAG,CAAC,mBAAmB,CAAC,CACrB,IAAI,CAAC,UAAC,IAAI,EAAK;AACZ,oBAAI,IAAI,KAAK,SAAS,EAAE;AACpB,0BAAK,SAAS,EAAE,CAAC;iBACpB,MAAM,IAAG,IAAI,KAAK,SAAS,EAAE;AAC1B,0BAAK,WAAW,EAAE,CAAC;iBACtB,MAAM;AACH,0BAAK,QAAQ,EAAE,CAAC;iBACnB;aACJ,CACJ,CAAC;;AAEF,gBAAI,CAAC,KAAK,CAAC,KAAK,CAAC;uBAAM,MAAK,KAAK,EAAE;aAAA,CAAC,CAAC;SACxC;;qBApBC,eAAe;;mBAsBZ,iBAAG;;;;;AAGJ,oBAAI,CAAC,KAAK,CACL,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAC5B,QAAQ,CAAC,SAAS,CAAC,CAAC;;AAEzB,oBAAG,IAAI,CAAC,MAAM,EAAE;AACZ,qBAAC,CAAC,GAAG,CAAC,iBAAiB,CAAC,CACnB,IAAI,CAAC,UAAC,IAAI;+BAAK,OAAK,kBAAkB,CAAC,IAAI,CAAC;qBAAA,CAAC,CAAC;iBACtD,MAAM;AACH,qBAAC,CAAC,GAAG,CAAC,kBAAkB;;iDAEnB,CACA,IAAI,CAAC,UAAC,IAAI,EAAK;;AAEZ,4BAAI,IAAI,KAAK,IAAI,EAAE;AACf,mCAAK,SAAS,EAAE,CAAC;yBACpB,MAAM;AACH,mCAAK,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;AAC5B,mCAAK,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC7B,iCAAK,CAAC,uBAAuB,CAAC,CAAC;yBAClC;qBACJ,CACJ,CAAC;iBACL;aACJ;;;mBAEQ,qBAAG;;;AAGR,oBAAI,CAAC,KAAK,CACL,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAC5B,QAAQ,CAAC,WAAW,CAAC,CAAC;AAC3B,oBAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACtB;;;mBAEU,uBAAG;AACV,oBAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACxC,oBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aACvB;;;mBAEO,oBAAG;AACP,oBAAI,CAAC,KAAK,CACL,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAC5B,QAAQ,CAAC,UAAU,CAAC,CAAC;AAC1B,qBAAK,CAAC,uBAAuB,CAAC,CAAC;aAClC;;;mBAEiB,4BAAC,IAAI,EAAE;AACrB,oBAAI,IAAI,KAAK,IAAI,EAAE;;;AAGf,wBAAI,CAAC,WAAW,EAAE,CAAC;iBACtB,MAAM;AACH,wBAAI,CAAC,QAAQ,EAAE,CAAC;iBACnB;aACJ;;;eA/EC,eAAe;;;AAkFrB,KAAC,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,YAAW;AAC3B,YAAI,eAAe,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;KACxC,CAAC,CAAC;CACN,CAAA,CAAE,MAAM,CAAC,CAAC","file":"public/_js/core.js","sourcesContent":["(function($) {\r\n    'use strict';\r\n\r\n    // TODO rebuild in React?\r\n\r\n    class BroadcastButton {\r\n        constructor($elem) {\r\n            this.$elem = $elem;\r\n            this.active = false;\r\n            this.allClasses = 'hr-error hr-waiting hr-active';\r\n            //console.log('BroadcastButton', this.$elem);\r\n\r\n            $.get('/broadcast/status')\r\n                .done((data) => {\r\n                    if (data === 'running') {\r\n                        this.setActive();\r\n                    } else if(data === 'waiting') {\r\n                        this.setInActive();\r\n                    } else {\r\n                        this.setError();\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.$elem.click(() => this.click());\r\n        }\r\n\r\n        click() {\r\n            //this.$elem.attr('class',''); // clear all classes\r\n            //this.$elem.addClass('waiting');\r\n            this.$elem\r\n                .removeClass(this.allClasses)\r\n                .addClass('waiting');\r\n            // TODO or .error?\r\n            if(this.active) {\r\n                $.get('/broadcast/stop')\r\n                    .done((data) => this.handleStopResponse(data));\r\n            } else {\r\n                $.get('/broadcast/start'/*,\r\n                 {\r\n                 }*/)\r\n                    .done((data) => {\r\n                        // TODO\r\n                        if (data === 'ok') {\r\n                            this.setActive();\r\n                        } else {\r\n                            this.$elem.attr('class',''); // clear all classes\r\n                            this.$elem.addClass('error');\r\n                            alert('an error has occurred');\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        setActive() {\r\n            //this.$elem.attr('class',''); // clear all classes\r\n            //this.$elem.addClass('active');\r\n            this.$elem\r\n                .removeClass(this.allClasses)\r\n                .addClass('hr-active');\r\n            this.active = true;\r\n        }\r\n\r\n        setInActive() {\r\n            this.$elem.removeClass(this.allClasses);\r\n            this.active = false;\r\n        }\r\n\r\n        setError() {\r\n            this.$elem\r\n                .removeClass(this.allClasses)\r\n                .addClass('hr-error');\r\n            alert('an error has occurred');\r\n        }\r\n\r\n        handleStopResponse(data) {\r\n            if (data === 'ok') {\r\n                //this.$elem.attr('class',''); // clear all classes\r\n                //this.active = false;\r\n                this.setInActive();\r\n            } else {\r\n                this.setError();\r\n            }\r\n        }\r\n    }\r\n\r\n    $('document').ready(function() {\r\n        new BroadcastButton($('#broadcast'));\r\n    });\r\n})(jQuery);"]}