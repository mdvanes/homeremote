{"version":3,"sources":["public/_js/core.js"],"names":[],"mappings":";;;;;;AAAA,CAAC,UAAS,CAAC,EAAE;AACT,gBAAY,CAAC;;QAEP,eAAe;AACN,iBADT,eAAe,CACL,KAAK,EAAE;;;kCADjB,eAAe;;AAEb,gBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,gBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,mBAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;;AAE3C,aAAC,CAAC,GAAG,CAAC,mBAAmB,CAAC,CACrB,IAAI,CAAC,UAAC,IAAI,EAAK;AACZ,oBAAI,IAAI,KAAK,SAAS,EAAE;;AAEpB,0BAAK,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC9B,0BAAK,MAAM,GAAG,IAAI,CAAC;iBACtB,MAAM,IAAG,IAAI,KAAK,SAAS,EAAE;;AAE1B,0BAAK,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;iBACpC,MAAM,EAEN;aACJ,CACJ,CAAC;;AAEF,gBAAI,CAAC,KAAK,CAAC,KAAK,CAAC;uBAAM,MAAK,KAAK,EAAE;aAAA,CAAC,CAAC;SACxC;;qBAtBC,eAAe;;mBAwBZ,iBAAG;;;AACJ,oBAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;AAC5B,oBAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;;AAE/B,oBAAG,IAAI,CAAC,MAAM,EAAE;AACZ,qBAAC,CAAC,GAAG,CAAC,iBAAiB,CAAC,CACnB,IAAI,CAAC,UAAC,IAAI;+BAAK,OAAK,kBAAkB,CAAC,IAAI,CAAC;qBAAA,CAAC,CAAC;iBACtD,MAAM;AACH,qBAAC,CAAC,GAAG,CAAC,kBAAkB;;iDAEnB,CACA,IAAI,CAAC,UAAC,IAAI,EAAK;;AAEZ,4BAAI,IAAI,KAAK,IAAI,EAAE;AACf,mCAAK,SAAS,EAAE,CAAC;yBACpB,MAAM;AACH,mCAAK,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;AAC5B,mCAAK,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC7B,iCAAK,CAAC,uBAAuB,CAAC,CAAC;yBAClC;qBACJ,CACJ,CAAC;iBACL;aACJ;;;mBAEQ,qBAAG;AACR,oBAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;AAC5B,oBAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC9B,oBAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACtB;;;mBAEiB,4BAAC,IAAI,EAAE;AACrB,oBAAI,IAAI,KAAK,IAAI,EAAE;AACf,wBAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;AAC5B,wBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;iBACvB,MAAM;AACH,wBAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;AAC5B,wBAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC7B,yBAAK,CAAC,uBAAuB,CAAC,CAAC;iBAClC;aACJ;;;eAhEC,eAAe;;;AAmErB,KAAC,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,YAAW;AAC3B,YAAI,eAAe,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;KACxC,CAAC,CAAC;CACN,CAAA,CAAE,MAAM,CAAC,CAAC","file":"public/_js/core.js","sourcesContent":["(function($) {\r\n    'use strict';\r\n\r\n    class BroadcastButton {\r\n        constructor($elem) {\r\n            this.$elem = $elem;\r\n            this.active = false;\r\n            console.log('BroadcastButton', this.$elem);\r\n\r\n            $.get('/broadcast/status')\r\n                .done((data) => {\r\n                    if (data === 'running') {\r\n                        // TODO setActive\r\n                        this.$elem.addClass('active');\r\n                        this.active = true;\r\n                    } else if(data === 'waiting') {\r\n                        // TODO setInActive\r\n                        this.$elem.removeClass('active');\r\n                    } else {\r\n                        // TODO error\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.$elem.click(() => this.click());\r\n        }\r\n\r\n        click() {\r\n            this.$elem.attr('class',''); // clear all classes\r\n            this.$elem.addClass('waiting');\r\n            // TODO or .error?\r\n            if(this.active) {\r\n                $.get('/broadcast/stop')\r\n                    .done((data) => this.handleStopResponse(data));\r\n            } else {\r\n                $.get('/broadcast/start'/*,\r\n                 {\r\n                 }*/)\r\n                    .done((data) => {\r\n                        // TODO\r\n                        if (data === 'ok') {\r\n                            this.setActive();\r\n                        } else {\r\n                            this.$elem.attr('class',''); // clear all classes\r\n                            this.$elem.addClass('error');\r\n                            alert('an error has occurred');\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        setActive() {\r\n            this.$elem.attr('class',''); // clear all classes\r\n            this.$elem.addClass('active');\r\n            this.active = true;\r\n        }\r\n\r\n        handleStopResponse(data) {\r\n            if (data === 'ok') {\r\n                this.$elem.attr('class',''); // clear all classes\r\n                this.active = false;\r\n            } else {\r\n                this.$elem.attr('class',''); // clear all classes\r\n                this.$elem.addClass('error');\r\n                alert('an error has occurred');\r\n            }\r\n        }\r\n    }\r\n\r\n    $('document').ready(function() {\r\n        new BroadcastButton($('#broadcast'));\r\n    });\r\n})(jQuery);"]}