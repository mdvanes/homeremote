{"version":3,"file":"homeRemote.js","sources":["../_babel/classes/RadioToggleButton.js","../_babel/core.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","RadioToggleButton","$elem","_this","this","click","toggleRadio","value","$","get","done","data","console","log","alert","RadioToggleButtonTempStop","_this2","BroadcastButton","active","allClasses","setActive","setInActive","setError","removeClass","addClass","handleStopResponse","attr","RadioInfo","_this3","oldVal","val","ready","jQuery"],"mappings":"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","sourcesContent":["/**\r\n * Created by m.van.es on 8-7-2015.\r\n */\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar RadioToggleButton = (function () {\n    function RadioToggleButton($elem) {\n        var _this = this;\n\n        _classCallCheck(this, RadioToggleButton);\n\n        this.$elem = $elem;\n        this.$elem.click(function () {\n            return _this.toggleRadio();\n        });\n    }\n\n    _createClass(RadioToggleButton, [{\n        key: 'toggleRadio',\n\n        // TODO works, but doesn't return anything (CORS error), so can't toggle\n        value: function toggleRadio() {\n            $.get('/radio/play').done(function (data) {\n                if (data !== 'error') {\n                    console.log(data);\n                } else {\n                    alert('an error has occurred');\n                }\n            });\n        }\n    }]);\n\n    return RadioToggleButton;\n})();\n\nvar RadioToggleButtonTempStop = (function () {\n    function RadioToggleButtonTempStop($elem) {\n        var _this2 = this;\n\n        _classCallCheck(this, RadioToggleButtonTempStop);\n\n        this.$elem = $elem;\n        this.$elem.click(function () {\n            return _this2.toggleRadio();\n        });\n    }\n\n    _createClass(RadioToggleButtonTempStop, [{\n        key: 'toggleRadio',\n        value: function toggleRadio() {\n            $.get('/radio/stop').done(function (data) {\n                if (data !== 'error') {\n                    console.log(data);\n                } else {\n                    alert('an error has occurred');\n                }\n            });\n        }\n    }]);\n\n    return RadioToggleButtonTempStop;\n})();\n","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\n(function ($) {\n    'use strict';\n\n    // TODO rebuild in React?\n\n    var BroadcastButton = (function () {\n        function BroadcastButton($elem) {\n            var _this = this;\n\n            _classCallCheck(this, BroadcastButton);\n\n            this.$elem = $elem;\n            this.active = false;\n            this.allClasses = 'hr-error hr-waiting hr-active';\n            //console.log('BroadcastButton', this.$elem);\n\n            $.get('/broadcast/status').done(function (data) {\n                if (data === 'running') {\n                    _this.setActive();\n                } else if (data === 'waiting') {\n                    _this.setInActive();\n                } else {\n                    _this.setError();\n                }\n            });\n\n            this.$elem.click(function () {\n                return _this.click();\n            });\n        }\n\n        _createClass(BroadcastButton, [{\n            key: 'click',\n            value: function click() {\n                var _this2 = this;\n\n                //this.$elem.attr('class',''); // clear all classes\n                //this.$elem.addClass('waiting');\n                this.$elem.removeClass(this.allClasses).addClass('waiting');\n                // TODO or .error?\n                if (this.active) {\n                    $.get('/broadcast/stop').done(function (data) {\n                        return _this2.handleStopResponse(data);\n                    });\n                } else {\n                    $.get('/broadcast/start' /*,\r\n                                             {\r\n                                             }*/).done(function (data) {\n                        // TODO\n                        if (data === 'ok') {\n                            _this2.setActive();\n                        } else {\n                            _this2.$elem.attr('class', ''); // clear all classes\n                            _this2.$elem.addClass('error');\n                            alert('an error has occurred');\n                        }\n                    });\n                }\n            }\n        }, {\n            key: 'setActive',\n            value: function setActive() {\n                //this.$elem.attr('class',''); // clear all classes\n                //this.$elem.addClass('active');\n                this.$elem.removeClass(this.allClasses).addClass('hr-active');\n                this.active = true;\n            }\n        }, {\n            key: 'setInActive',\n            value: function setInActive() {\n                this.$elem.removeClass(this.allClasses);\n                this.active = false;\n            }\n        }, {\n            key: 'setError',\n            value: function setError() {\n                this.$elem.removeClass(this.allClasses).addClass('hr-error');\n                alert('an error has occurred');\n            }\n        }, {\n            key: 'handleStopResponse',\n            value: function handleStopResponse(data) {\n                if (data === 'ok') {\n                    //this.$elem.attr('class',''); // clear all classes\n                    //this.active = false;\n                    this.setInActive();\n                } else {\n                    this.setError();\n                }\n            }\n        }]);\n\n        return BroadcastButton;\n    })();\n\n    var RadioInfo = (function () {\n        function RadioInfo($elem) {\n            var _this3 = this;\n\n            _classCallCheck(this, RadioInfo);\n\n            this.$elem = $elem;\n            this.$elem.click(function () {\n                return _this3.toggleRadio();\n            });\n        }\n\n        _createClass(RadioInfo, [{\n            key: 'toggleRadio',\n            value: function toggleRadio() {\n                console.log('info');\n                $.get('/radio/info').done(function (data) {\n                    if (data !== 'error') {\n                        var oldVal = $('#log').val();\n                        $('#log').val(data + oldVal);\n                    } else {\n                        alert('an error has occurred');\n                    }\n                });\n            }\n        }]);\n\n        return RadioInfo;\n    })();\n\n    $('document').ready(function () {\n        new BroadcastButton($('#broadcast'));\n        new RadioToggleButton($('#play'));\n        new RadioToggleButtonTempStop($('#stop'));\n        new RadioInfo($('#info'));\n    });\n})(jQuery);\n"]}